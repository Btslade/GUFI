$ generatetree prefix

$ gufi_dir2trace -d "|" -n 2 -x "prefix" "trace"

$ gufi_trace2index -d "|" trace.0 trace.1 "prefix" | tail -n 4 | head -n 3
Files: 15
Dirs:  5 (0 empty)
Total: 20

Source Directory:
    prefix
    prefix/.hidden
    prefix/1KB
    prefix/1MB
    prefix/directory
    prefix/directory/executable
    prefix/directory/readonly
    prefix/directory/subdirectory
    prefix/directory/subdirectory/directory_symlink
    prefix/directory/subdirectory/repeat_name
    prefix/directory/writable
    prefix/empty_file
    prefix/file_symlink
    prefix/leaf_directory
    prefix/leaf_directory/leaf_file1
    prefix/leaf_directory/leaf_file2
    prefix/old_file
    prefix/repeat_name
    prefix/unusual#? directory ,
    prefix/unusual#? directory ,/unusual, name?#

GUFI Index:
    prefix
    prefix/.hidden
    prefix/1KB
    prefix/1MB
    prefix/directory
    prefix/directory/executable
    prefix/directory/readonly
    prefix/directory/subdirectory
    prefix/directory/subdirectory/directory_symlink
    prefix/directory/subdirectory/repeat_name
    prefix/directory/writable
    prefix/empty_file
    prefix/file_symlink
    prefix/leaf_directory
    prefix/leaf_directory/leaf_file1
    prefix/leaf_directory/leaf_file2
    prefix/old_file
    prefix/repeat_name
    prefix/unusual#? directory ,
    prefix/unusual#? directory ,/unusual, name?#

# bad trace path
$ gufi_trace2index -d "|" -n "2" "" "prefix"
Could not open "": No such file or directory (2)
Failed to open trace file for each thread

# bad index path
$ gufi_trace2index -d "|" -n "2" "trace" "prefix/1KB"
Dirs:  5 (0 empty)
Dupdir failure: "prefix/1KB/prefix": Not a directory (20)
Dupdir failure: "prefix/1KB/prefix/directory": Not a directory (20)
Dupdir failure: "prefix/1KB/prefix/directory/subdirectory": Not a directory (20)
Dupdir failure: "prefix/1KB/prefix/leaf_directory": Not a directory (20)

# empty trace
$ gufi_trace2index -d "|" -n "2" "badtrace" "prefix"
Could not get the first line of the trace

# cannot find delimiter of first line
$ gufi_trace2index -d "?" -n "2" "trace" "prefix"
Could not find the specified delimiter

# first line does not start with a directory
$ gufi_trace2index -d "|" -n "2" "badtrace" "prefix"
First line of trace is not a directory

